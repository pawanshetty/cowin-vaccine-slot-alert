"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fromWebToken = void 0;
const property_provider_1 = require("@aws-sdk/property-provider");
const fromWebToken = (init) => () => {
    const { roleArn, roleSessionName, webIdentityToken, providerId, policyArns, policy, durationSeconds, roleAssumerWithWebIdentity, } = init;
    if (!roleAssumerWithWebIdentity) {
        throw new property_provider_1.ProviderError(`Role Arn '${roleArn}' needs to be assumed with web identity,` + ` but no role assumption callback was provided.`, false);
    }
    return roleAssumerWithWebIdentity({
        RoleArn: roleArn,
        RoleSessionName: roleSessionName !== null && roleSessionName !== void 0 ? roleSessionName : `aws-sdk-js-session-${Date.now()}`,
        WebIdentityToken: webIdentityToken,
        ProviderId: providerId,
        PolicyArns: policyArns,
        Policy: policy,
        DurationSeconds: durationSeconds,
    });
};
exports.fromWebToken = fromWebToken;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJvbVdlYlRva2VuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Zyb21XZWJUb2tlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxrRUFBMkQ7QUFpSXBELE1BQU0sWUFBWSxHQUFHLENBQUMsSUFBc0IsRUFBc0IsRUFBRSxDQUFDLEdBQUcsRUFBRTtJQUMvRSxNQUFNLEVBQ0osT0FBTyxFQUNQLGVBQWUsRUFDZixnQkFBZ0IsRUFDaEIsVUFBVSxFQUNWLFVBQVUsRUFDVixNQUFNLEVBQ04sZUFBZSxFQUNmLDBCQUEwQixHQUMzQixHQUFHLElBQUksQ0FBQztJQUVULElBQUksQ0FBQywwQkFBMEIsRUFBRTtRQUMvQixNQUFNLElBQUksaUNBQWEsQ0FDckIsYUFBYSxPQUFPLDBDQUEwQyxHQUFHLGdEQUFnRCxFQUNqSCxLQUFLLENBQ04sQ0FBQztLQUNIO0lBRUQsT0FBTywwQkFBMEIsQ0FBQztRQUNoQyxPQUFPLEVBQUUsT0FBTztRQUNoQixlQUFlLEVBQUUsZUFBZSxhQUFmLGVBQWUsY0FBZixlQUFlLEdBQUksc0JBQXNCLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtRQUN0RSxnQkFBZ0IsRUFBRSxnQkFBZ0I7UUFDbEMsVUFBVSxFQUFFLFVBQVU7UUFDdEIsVUFBVSxFQUFFLFVBQVU7UUFDdEIsTUFBTSxFQUFFLE1BQU07UUFDZCxlQUFlLEVBQUUsZUFBZTtLQUNqQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUE1QlcsUUFBQSxZQUFZLGdCQTRCdkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm92aWRlckVycm9yIH0gZnJvbSBcIkBhd3Mtc2RrL3Byb3BlcnR5LXByb3ZpZGVyXCI7XG5pbXBvcnQgeyBDcmVkZW50aWFsUHJvdmlkZXIsIENyZWRlbnRpYWxzIH0gZnJvbSBcIkBhd3Mtc2RrL3R5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzdW1lUm9sZVdpdGhXZWJJZGVudGl0eVBhcmFtcyB7XG4gIC8qKlxuICAgKiA8cD5UaGUgQW1hem9uIFJlc291cmNlIE5hbWUgKEFSTikgb2YgdGhlIHJvbGUgdGhhdCB0aGUgY2FsbGVyIGlzIGFzc3VtaW5nLjwvcD5cbiAgICovXG4gIFJvbGVBcm46IHN0cmluZztcbiAgLyoqXG4gICAqIDxwPkFuIGlkZW50aWZpZXIgZm9yIHRoZSBhc3N1bWVkIHJvbGUgc2Vzc2lvbi4gVHlwaWNhbGx5LCB5b3UgcGFzcyB0aGUgbmFtZSBvciBpZGVudGlmaWVyXG4gICAqICAgICAgICAgIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSB1c2VyIHdobyBpcyB1c2luZyB5b3VyIGFwcGxpY2F0aW9uLiBUaGF0IHdheSwgdGhlIHRlbXBvcmFyeVxuICAgKiAgICAgICAgICBzZWN1cml0eSBjcmVkZW50aWFscyB0aGF0IHlvdXIgYXBwbGljYXRpb24gd2lsbCB1c2UgYXJlIGFzc29jaWF0ZWQgd2l0aCB0aGF0IHVzZXIuIFRoaXNcbiAgICogICAgICAgICAgc2Vzc2lvbiBuYW1lIGlzIGluY2x1ZGVkIGFzIHBhcnQgb2YgdGhlIEFSTiBhbmQgYXNzdW1lZCByb2xlIElEIGluIHRoZVxuICAgKiAgICAgICAgICAgICA8Y29kZT5Bc3N1bWVkUm9sZVVzZXI8L2NvZGU+IHJlc3BvbnNlIGVsZW1lbnQuPC9wPlxuICAgKiAgICAgICAgICA8cD5UaGUgcmVnZXggdXNlZCB0byB2YWxpZGF0ZSB0aGlzIHBhcmFtZXRlciBpcyBhIHN0cmluZyBvZiBjaGFyYWN0ZXJzXG4gICAqICAgICBjb25zaXN0aW5nIG9mIHVwcGVyLSBhbmQgbG93ZXItY2FzZSBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIG5vIHNwYWNlcy4gWW91IGNhblxuICAgKiAgICAgYWxzbyBpbmNsdWRlIHVuZGVyc2NvcmVzIG9yIGFueSBvZiB0aGUgZm9sbG93aW5nIGNoYXJhY3RlcnM6ID0sLkAtPC9wPlxuICAgKi9cbiAgUm9sZVNlc3Npb25OYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiA8cD5UaGUgT0F1dGggMi4wIGFjY2VzcyB0b2tlbiBvciBPcGVuSUQgQ29ubmVjdCBJRCB0b2tlbiB0aGF0IGlzIHByb3ZpZGVkIGJ5IHRoZSBpZGVudGl0eVxuICAgKiAgICAgICAgICBwcm92aWRlci4gWW91ciBhcHBsaWNhdGlvbiBtdXN0IGdldCB0aGlzIHRva2VuIGJ5IGF1dGhlbnRpY2F0aW5nIHRoZSB1c2VyIHdobyBpcyB1c2luZyB5b3VyXG4gICAqICAgICAgICAgIGFwcGxpY2F0aW9uIHdpdGggYSB3ZWIgaWRlbnRpdHkgcHJvdmlkZXIgYmVmb3JlIHRoZSBhcHBsaWNhdGlvbiBtYWtlcyBhblxuICAgKiAgICAgICAgICAgICA8Y29kZT5Bc3N1bWVSb2xlV2l0aFdlYklkZW50aXR5PC9jb2RlPiBjYWxsLiA8L3A+XG4gICAqL1xuICBXZWJJZGVudGl0eVRva2VuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIDxwPlRoZSBmdWxseSBxdWFsaWZpZWQgaG9zdCBjb21wb25lbnQgb2YgdGhlIGRvbWFpbiBuYW1lIG9mIHRoZSBpZGVudGl0eSBwcm92aWRlci48L3A+XG4gICAqICAgICAgICAgIDxwPlNwZWNpZnkgdGhpcyB2YWx1ZSBvbmx5IGZvciBPQXV0aCAyLjAgYWNjZXNzIHRva2Vucy4gQ3VycmVudGx5XG4gICAqICAgICAgICAgICAgIDxjb2RlPnd3dy5hbWF6b24uY29tPC9jb2RlPiBhbmQgPGNvZGU+Z3JhcGguZmFjZWJvb2suY29tPC9jb2RlPiBhcmUgdGhlIG9ubHkgc3VwcG9ydGVkXG4gICAqICAgICAgICAgIGlkZW50aXR5IHByb3ZpZGVycyBmb3IgT0F1dGggMi4wIGFjY2VzcyB0b2tlbnMuIERvIG5vdCBpbmNsdWRlIFVSTCBzY2hlbWVzIGFuZCBwb3J0XG4gICAqICAgICAgICAgIG51bWJlcnMuPC9wPlxuICAgKiAgICAgICAgICA8cD5EbyBub3Qgc3BlY2lmeSB0aGlzIHZhbHVlIGZvciBPcGVuSUQgQ29ubmVjdCBJRCB0b2tlbnMuPC9wPlxuICAgKi9cbiAgUHJvdmlkZXJJZD86IHN0cmluZztcblxuICAvKipcbiAgICogPHA+VGhlIEFtYXpvbiBSZXNvdXJjZSBOYW1lcyAoQVJOcykgb2YgdGhlIElBTSBtYW5hZ2VkIHBvbGljaWVzIHRoYXQgeW91IHdhbnQgdG8gdXNlIGFzXG4gICAqICAgICAgICAgIG1hbmFnZWQgc2Vzc2lvbiBwb2xpY2llcy4gVGhlIHBvbGljaWVzIG11c3QgZXhpc3QgaW4gdGhlIHNhbWUgYWNjb3VudCBhcyB0aGUgcm9sZS48L3A+XG4gICAqICAgICAgICAgIDxwPlRoaXMgcGFyYW1ldGVyIGlzIG9wdGlvbmFsLiBZb3UgY2FuIHByb3ZpZGUgdXAgdG8gMTAgbWFuYWdlZCBwb2xpY3kgQVJOcy4gSG93ZXZlciwgdGhlXG4gICAqICAgICAgICAgIHBsYWluIHRleHQgdGhhdCB5b3UgdXNlIGZvciBib3RoIGlubGluZSBhbmQgbWFuYWdlZCBzZXNzaW9uIHBvbGljaWVzIGNhbid0IGV4Y2VlZCAyLDA0OFxuICAgKiAgICAgICAgICBjaGFyYWN0ZXJzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBBUk5zLCBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9nZW5lcmFsL2xhdGVzdC9nci9hd3MtYXJucy1hbmQtbmFtZXNwYWNlcy5odG1sXCI+QW1hem9uIFJlc291cmNlIE5hbWVzIChBUk5zKSBhbmQgQVdTXG4gICAqICAgICAgICAgICAgIFNlcnZpY2UgTmFtZXNwYWNlczwvYT4gaW4gdGhlIEFXUyBHZW5lcmFsIFJlZmVyZW5jZS48L3A+XG4gICAqICAgICAgICAgIDxub3RlPlxuICAgKiAgICAgICAgICAgICA8cD5BbiBBV1MgY29udmVyc2lvbiBjb21wcmVzc2VzIHRoZSBwYXNzZWQgc2Vzc2lvbiBwb2xpY2llcyBhbmQgc2Vzc2lvbiB0YWdzIGludG8gYVxuICAgKiAgICAgICAgICAgICBwYWNrZWQgYmluYXJ5IGZvcm1hdCB0aGF0IGhhcyBhIHNlcGFyYXRlIGxpbWl0LiBZb3VyIHJlcXVlc3QgY2FuIGZhaWwgZm9yIHRoaXMgbGltaXRcbiAgICogICAgICAgICAgICAgZXZlbiBpZiB5b3VyIHBsYWluIHRleHQgbWVldHMgdGhlIG90aGVyIHJlcXVpcmVtZW50cy4gVGhlIDxjb2RlPlBhY2tlZFBvbGljeVNpemU8L2NvZGU+XG4gICAqICAgICAgICAgICAgIHJlc3BvbnNlIGVsZW1lbnQgaW5kaWNhdGVzIGJ5IHBlcmNlbnRhZ2UgaG93IGNsb3NlIHRoZSBwb2xpY2llcyBhbmQgdGFncyBmb3IgeW91clxuICAgKiAgICAgICAgICAgICByZXF1ZXN0IGFyZSB0byB0aGUgdXBwZXIgc2l6ZSBsaW1pdC5cbiAgICogICAgICAgICAgICAgPC9wPlxuICAgKiAgICAgICAgICA8L25vdGU+XG4gICAqXG4gICAqICAgICAgICAgIDxwPlBhc3NpbmcgcG9saWNpZXMgdG8gdGhpcyBvcGVyYXRpb24gcmV0dXJucyBuZXdcbiAgICogICAgICAgICAgdGVtcG9yYXJ5IGNyZWRlbnRpYWxzLiBUaGUgcmVzdWx0aW5nIHNlc3Npb24ncyBwZXJtaXNzaW9ucyBhcmUgdGhlIGludGVyc2VjdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgcm9sZSdzIGlkZW50aXR5LWJhc2VkIHBvbGljeSBhbmQgdGhlIHNlc3Npb24gcG9saWNpZXMuIFlvdSBjYW4gdXNlIHRoZSByb2xlJ3MgdGVtcG9yYXJ5XG4gICAqICAgICAgICAgIGNyZWRlbnRpYWxzIGluIHN1YnNlcXVlbnQgQVdTIEFQSSBjYWxscyB0byBhY2Nlc3MgcmVzb3VyY2VzIGluIHRoZSBhY2NvdW50IHRoYXQgb3duc1xuICAgKiAgICAgICAgICB0aGUgcm9sZS4gWW91IGNhbm5vdCB1c2Ugc2Vzc2lvbiBwb2xpY2llcyB0byBncmFudCBtb3JlIHBlcm1pc3Npb25zIHRoYW4gdGhvc2UgYWxsb3dlZFxuICAgKiAgICAgICAgICBieSB0aGUgaWRlbnRpdHktYmFzZWQgcG9saWN5IG9mIHRoZSByb2xlIHRoYXQgaXMgYmVpbmcgYXNzdW1lZC4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuICAgKiAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0lBTS9sYXRlc3QvVXNlckd1aWRlL2FjY2Vzc19wb2xpY2llcy5odG1sI3BvbGljaWVzX3Nlc3Npb25cIj5TZXNzaW9uXG4gICAqICAgICAgICAgICAgIFBvbGljaWVzPC9hPiBpbiB0aGUgPGk+SUFNIFVzZXIgR3VpZGU8L2k+LjwvcD5cbiAgICovXG4gIFBvbGljeUFybnM/OiB7IGFybj86IHN0cmluZyB9W107XG5cbiAgLyoqXG4gICAqIDxwPkFuIElBTSBwb2xpY3kgaW4gSlNPTiBmb3JtYXQgdGhhdCB5b3Ugd2FudCB0byB1c2UgYXMgYW4gaW5saW5lIHNlc3Npb24gcG9saWN5LjwvcD5cbiAgICogICAgICAgICAgPHA+VGhpcyBwYXJhbWV0ZXIgaXMgb3B0aW9uYWwuIFBhc3NpbmcgcG9saWNpZXMgdG8gdGhpcyBvcGVyYXRpb24gcmV0dXJucyBuZXdcbiAgICogICAgICAgICAgdGVtcG9yYXJ5IGNyZWRlbnRpYWxzLiBUaGUgcmVzdWx0aW5nIHNlc3Npb24ncyBwZXJtaXNzaW9ucyBhcmUgdGhlIGludGVyc2VjdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgcm9sZSdzIGlkZW50aXR5LWJhc2VkIHBvbGljeSBhbmQgdGhlIHNlc3Npb24gcG9saWNpZXMuIFlvdSBjYW4gdXNlIHRoZSByb2xlJ3MgdGVtcG9yYXJ5XG4gICAqICAgICAgICAgIGNyZWRlbnRpYWxzIGluIHN1YnNlcXVlbnQgQVdTIEFQSSBjYWxscyB0byBhY2Nlc3MgcmVzb3VyY2VzIGluIHRoZSBhY2NvdW50IHRoYXQgb3duc1xuICAgKiAgICAgICAgICB0aGUgcm9sZS4gWW91IGNhbm5vdCB1c2Ugc2Vzc2lvbiBwb2xpY2llcyB0byBncmFudCBtb3JlIHBlcm1pc3Npb25zIHRoYW4gdGhvc2UgYWxsb3dlZFxuICAgKiAgICAgICAgICBieSB0aGUgaWRlbnRpdHktYmFzZWQgcG9saWN5IG9mIHRoZSByb2xlIHRoYXQgaXMgYmVpbmcgYXNzdW1lZC4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuICAgKiAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0lBTS9sYXRlc3QvVXNlckd1aWRlL2FjY2Vzc19wb2xpY2llcy5odG1sI3BvbGljaWVzX3Nlc3Npb25cIj5TZXNzaW9uXG4gICAqICAgICAgICAgICAgIFBvbGljaWVzPC9hPiBpbiB0aGUgPGk+SUFNIFVzZXIgR3VpZGU8L2k+LjwvcD5cbiAgICogICAgICAgICAgPHA+VGhlIHBsYWluIHRleHQgdGhhdCB5b3UgdXNlIGZvciBib3RoIGlubGluZSBhbmQgbWFuYWdlZCBzZXNzaW9uIHBvbGljaWVzIGNhbid0IGV4Y2VlZFxuICAgKiAgICAgICAgICAyLDA0OCBjaGFyYWN0ZXJzLiBUaGUgSlNPTiBwb2xpY3kgY2hhcmFjdGVycyBjYW4gYmUgYW55IEFTQ0lJIGNoYXJhY3RlciBmcm9tIHRoZSBzcGFjZVxuICAgKiAgICAgICAgICBjaGFyYWN0ZXIgdG8gdGhlIGVuZCBvZiB0aGUgdmFsaWQgY2hhcmFjdGVyIGxpc3QgKFxcdTAwMjAgdGhyb3VnaCBcXHUwMEZGKS4gSXQgY2FuIGFsc29cbiAgICogICAgICAgICAgaW5jbHVkZSB0aGUgdGFiIChcXHUwMDA5KSwgbGluZWZlZWQgKFxcdTAwMEEpLCBhbmQgY2FycmlhZ2UgcmV0dXJuIChcXHUwMDBEKVxuICAgKiAgICAgICAgICBjaGFyYWN0ZXJzLjwvcD5cbiAgICogICAgICAgICAgPG5vdGU+XG4gICAqICAgICAgICAgICAgIDxwPkFuIEFXUyBjb252ZXJzaW9uIGNvbXByZXNzZXMgdGhlIHBhc3NlZCBzZXNzaW9uIHBvbGljaWVzIGFuZCBzZXNzaW9uIHRhZ3MgaW50byBhXG4gICAqICAgICAgICAgICAgIHBhY2tlZCBiaW5hcnkgZm9ybWF0IHRoYXQgaGFzIGEgc2VwYXJhdGUgbGltaXQuIFlvdXIgcmVxdWVzdCBjYW4gZmFpbCBmb3IgdGhpcyBsaW1pdFxuICAgKiAgICAgICAgICAgICBldmVuIGlmIHlvdXIgcGxhaW4gdGV4dCBtZWV0cyB0aGUgb3RoZXIgcmVxdWlyZW1lbnRzLiBUaGUgPGNvZGU+UGFja2VkUG9saWN5U2l6ZTwvY29kZT5cbiAgICogICAgICAgICAgICAgcmVzcG9uc2UgZWxlbWVudCBpbmRpY2F0ZXMgYnkgcGVyY2VudGFnZSBob3cgY2xvc2UgdGhlIHBvbGljaWVzIGFuZCB0YWdzIGZvciB5b3VyXG4gICAqICAgICAgICAgICAgIHJlcXVlc3QgYXJlIHRvIHRoZSB1cHBlciBzaXplIGxpbWl0LlxuICAgKiAgICAgICAgICAgICA8L3A+XG4gICAqICAgICAgICAgIDwvbm90ZT5cbiAgICovXG4gIFBvbGljeT86IHN0cmluZztcblxuICAvKipcbiAgICogPHA+VGhlIGR1cmF0aW9uLCBpbiBzZWNvbmRzLCBvZiB0aGUgcm9sZSBzZXNzaW9uLiBUaGUgdmFsdWUgY2FuIHJhbmdlIGZyb20gOTAwIHNlY29uZHMgKDE1XG4gICAqICAgICAgICAgIG1pbnV0ZXMpIHVwIHRvIHRoZSBtYXhpbXVtIHNlc3Npb24gZHVyYXRpb24gc2V0dGluZyBmb3IgdGhlIHJvbGUuIFRoaXMgc2V0dGluZyBjYW4gaGF2ZSBhXG4gICAqICAgICAgICAgIHZhbHVlIGZyb20gMSBob3VyIHRvIDEyIGhvdXJzLiBJZiB5b3Ugc3BlY2lmeSBhIHZhbHVlIGhpZ2hlciB0aGFuIHRoaXMgc2V0dGluZywgdGhlXG4gICAqICAgICAgICAgIG9wZXJhdGlvbiBmYWlscy4gRm9yIGV4YW1wbGUsIGlmIHlvdSBzcGVjaWZ5IGEgc2Vzc2lvbiBkdXJhdGlvbiBvZiAxMiBob3VycywgYnV0IHlvdXJcbiAgICogICAgICAgICAgYWRtaW5pc3RyYXRvciBzZXQgdGhlIG1heGltdW0gc2Vzc2lvbiBkdXJhdGlvbiB0byA2IGhvdXJzLCB5b3VyIG9wZXJhdGlvbiBmYWlscy4gVG8gbGVhcm5cbiAgICogICAgICAgICAgaG93IHRvIHZpZXcgdGhlIG1heGltdW0gdmFsdWUgZm9yIHlvdXIgcm9sZSwgc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vSUFNL2xhdGVzdC9Vc2VyR3VpZGUvaWRfcm9sZXNfdXNlLmh0bWwjaWRfcm9sZXNfdXNlX3ZpZXctcm9sZS1tYXgtc2Vzc2lvblwiPlZpZXcgdGhlXG4gICAqICAgICAgICAgICAgIE1heGltdW0gU2Vzc2lvbiBEdXJhdGlvbiBTZXR0aW5nIGZvciBhIFJvbGU8L2E+IGluIHRoZVxuICAgKiAgICAgICAgICAgICA8aT5JQU0gVXNlciBHdWlkZTwvaT4uPC9wPlxuICAgKiAgICAgICAgICA8cD5CeSBkZWZhdWx0LCB0aGUgdmFsdWUgaXMgc2V0IHRvIDxjb2RlPjM2MDA8L2NvZGU+IHNlY29uZHMuIDwvcD5cbiAgICogICAgICAgICAgPG5vdGU+XG4gICAqICAgICAgICAgICAgIDxwPlRoZSA8Y29kZT5EdXJhdGlvblNlY29uZHM8L2NvZGU+IHBhcmFtZXRlciBpcyBzZXBhcmF0ZSBmcm9tIHRoZSBkdXJhdGlvbiBvZiBhIGNvbnNvbGVcbiAgICogICAgICAgICAgICAgc2Vzc2lvbiB0aGF0IHlvdSBtaWdodCByZXF1ZXN0IHVzaW5nIHRoZSByZXR1cm5lZCBjcmVkZW50aWFscy4gVGhlIHJlcXVlc3QgdG8gdGhlXG4gICAqICAgICAgICAgICAgIGZlZGVyYXRpb24gZW5kcG9pbnQgZm9yIGEgY29uc29sZSBzaWduLWluIHRva2VuIHRha2VzIGEgPGNvZGU+U2Vzc2lvbkR1cmF0aW9uPC9jb2RlPlxuICAgKiAgICAgICAgICAgICBwYXJhbWV0ZXIgdGhhdCBzcGVjaWZpZXMgdGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBjb25zb2xlIHNlc3Npb24uIEZvciBtb3JlXG4gICAqICAgICAgICAgICAgIGluZm9ybWF0aW9uLCBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9JQU0vbGF0ZXN0L1VzZXJHdWlkZS9pZF9yb2xlc19wcm92aWRlcnNfZW5hYmxlLWNvbnNvbGUtY3VzdG9tLXVybC5odG1sXCI+Q3JlYXRpbmcgYSBVUkxcbiAgICogICAgICAgICAgICAgICAgdGhhdCBFbmFibGVzIEZlZGVyYXRlZCBVc2VycyB0byBBY2Nlc3MgdGhlIEFXUyBNYW5hZ2VtZW50IENvbnNvbGU8L2E+IGluIHRoZVxuICAgKiAgICAgICAgICAgICAgICA8aT5JQU0gVXNlciBHdWlkZTwvaT4uPC9wPlxuICAgKiAgICAgICAgICA8L25vdGU+XG4gICAqL1xuICBEdXJhdGlvblNlY29uZHM/OiBudW1iZXI7XG59XG5cbnR5cGUgTG93ZXJDYXNlS2V5PFQ+ID0geyBbSyBpbiBrZXlvZiBUIGFzIGAke1VuY2FwaXRhbGl6ZTxzdHJpbmcgJiBLPn1gXTogVFtLXSB9O1xuZXhwb3J0IGludGVyZmFjZSBGcm9tV2ViVG9rZW5Jbml0IGV4dGVuZHMgT21pdDxMb3dlckNhc2VLZXk8QXNzdW1lUm9sZVdpdGhXZWJJZGVudGl0eVBhcmFtcz4sIFwicm9sZVNlc3Npb25OYW1lXCI+IHtcbiAgLyoqXG4gICAqIFRoZSBJQU0gc2Vzc2lvbiBuYW1lIHVzZWQgdG8gZGlzdGluZ3Vpc2ggc2Vzc2lvbnMuXG4gICAqL1xuICByb2xlU2Vzc2lvbk5hbWU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBhc3N1bWVzIGEgcm9sZSB3aXRoIHdlYiBpZGVudGl0eSBhbmQgcmV0dXJucyBhIHByb21pc2UgZnVsZmlsbGVkIHdpdGhcbiAgICogY3JlZGVudGlhbHMgZm9yIHRoZSBhc3N1bWVkIHJvbGUuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgaW5wdXQgcGFyYW1ldGVyIG9mIHN0czpBc3N1bWVSb2xlV2l0aFdlYklkZW50aXR5IEFQSS5cbiAgICovXG4gIHJvbGVBc3N1bWVyV2l0aFdlYklkZW50aXR5PzogKHBhcmFtczogQXNzdW1lUm9sZVdpdGhXZWJJZGVudGl0eVBhcmFtcykgPT4gUHJvbWlzZTxDcmVkZW50aWFscz47XG59XG5cbmV4cG9ydCBjb25zdCBmcm9tV2ViVG9rZW4gPSAoaW5pdDogRnJvbVdlYlRva2VuSW5pdCk6IENyZWRlbnRpYWxQcm92aWRlciA9PiAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICByb2xlQXJuLFxuICAgIHJvbGVTZXNzaW9uTmFtZSxcbiAgICB3ZWJJZGVudGl0eVRva2VuLFxuICAgIHByb3ZpZGVySWQsXG4gICAgcG9saWN5QXJucyxcbiAgICBwb2xpY3ksXG4gICAgZHVyYXRpb25TZWNvbmRzLFxuICAgIHJvbGVBc3N1bWVyV2l0aFdlYklkZW50aXR5LFxuICB9ID0gaW5pdDtcblxuICBpZiAoIXJvbGVBc3N1bWVyV2l0aFdlYklkZW50aXR5KSB7XG4gICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXG4gICAgICBgUm9sZSBBcm4gJyR7cm9sZUFybn0nIG5lZWRzIHRvIGJlIGFzc3VtZWQgd2l0aCB3ZWIgaWRlbnRpdHksYCArIGAgYnV0IG5vIHJvbGUgYXNzdW1wdGlvbiBjYWxsYmFjayB3YXMgcHJvdmlkZWQuYCxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByb2xlQXNzdW1lcldpdGhXZWJJZGVudGl0eSh7XG4gICAgUm9sZUFybjogcm9sZUFybixcbiAgICBSb2xlU2Vzc2lvbk5hbWU6IHJvbGVTZXNzaW9uTmFtZSA/PyBgYXdzLXNkay1qcy1zZXNzaW9uLSR7RGF0ZS5ub3coKX1gLFxuICAgIFdlYklkZW50aXR5VG9rZW46IHdlYklkZW50aXR5VG9rZW4sXG4gICAgUHJvdmlkZXJJZDogcHJvdmlkZXJJZCxcbiAgICBQb2xpY3lBcm5zOiBwb2xpY3lBcm5zLFxuICAgIFBvbGljeTogcG9saWN5LFxuICAgIER1cmF0aW9uU2Vjb25kczogZHVyYXRpb25TZWNvbmRzLFxuICB9KTtcbn07XG4iXX0=